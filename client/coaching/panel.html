<!--<template name="coachingPanel">
  <div class="row firstRow" style="height:100vh;">
    <div class="col m3" style="background-color : #292929; color:white;height:100%;">

      <ul class="tabs tabs-transparent">
        <li class="tab">
          <a href="#pastLessons">Passés</a>
        </li>
        <li class="tab">
          <a href="#comingLessons">Mes cours</a>
        </li>
      </ul>
      <ul class="collection" id="pastLessons">
        {{#each lesson in coachLessons}}
           {{> coachingLessonItem lesson}}
        {{/each}}
      </ul>
      <ul class="collection" id="comingLessons">
        {{#each lesson in coachLessons}}
           {{> coachingLessonItem lesson}}
        {{/each}}
      </ul>
    </div>

    <div class="col m9">
      <div class="row" style="margin-top:40px;">
        <div class="col m9">
          <div class="row">
            <h4>{{title}}</h4>
            <h5>{{dateTime}}</h5>
          </div>
          <div class="row">
            {{> attendingListTemplate }}
          </div>
        </div>

        <div class="col m3">
          <ul>
            <li>
              <button class="btn red accent-3 waves-effect probBtn">
                Un problème ?
              </button>
            </li>
            <li>
              <button class="btn cyan darken-2 waves-effect addBtn">
                Ajouter un cours
              </button>
            </li>
            <li>
              <button class="btn light-green waves-effect editBtn">
                Modifier un cours
              </button>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</template> -->

<!--<template name="attendingListTemplate">
  <div class="card">
    <form>
      <div class="card-content">
        <ul class="collection">
          {{#each users}}
            <li class="collection-item">
              <div class="row">
                <div class="col s8">
                  <p class="flow-text" style="display:inline;">{{firstName}} {{lastName}}</p>
                  <p>{{birthdate}}</p>
                </div>
                <div class="col s4">
                  {{#if canGiveBonus}}
                    <button class="btn green accent-3 giveBonus">+ 10</button>
                  {{/if}}
                </div>
              </div>
            </li>
          {{/each}}
          {{#each nonUsers}}
            <li class="collection-item">
              <div class="row">
                <div class="col s8">
                  <p class="flow-text" style="display:inline;">{{firstNameNonUser}} {{lastNameNonUser}}</p>
                  <p>{{emailNonUser}}</p>
                  <p>{{commentNonUser}}</p>
                </div>
              </div>
            </li>
          {{/each}}

          <div class="center-align" style="margin-top:10px;">
            <a href="#modalFormNewAttendee" class="waves-effect waves-light btn blue darken-3 addAttendeeModalButton">Ajouter</a>
          </div>
          <form id="modalFormNewAttendee" class="modal">
              <div class="modal-content">
                <h4>Ajouter un participant non-membre</h4>
                <div class="row">
                  <div class="input-field col s6">
                    <input id="lastName" type="text" class="validate-required">
                    <label for="lastName">Nom</label>
                  </div>
                  <div class="input-field col s6">
                    <input id="firstName" type="text" class="validate-required">
                    <label  for="firstName">Prénom</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                    <input id="email" type="email" class="validate">
                    <label  for="email">Adresse e-mail</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                    <input id="comment" type="text" class="validate">
                    <label  for="comment">Commentaire</label>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button class="btnModal modal-action modal-close waves-effect waves-green btn-flat" type="submit">Ajouter</button>
              </div>
          </form>
        </ul>
      </div>
    </form>
  </div>
</template>-->

<!-- <template name="coachingLessonItem">
  <li class="collection-item"><a href='#!'>
    <div class="">
      {{title}}
    </div>
    <div class="">
      {{dateForHuman}}
    </div>
  </a></li>
</template> -->

<template name="coachingPanel">
<div class="grey lighten-4">
  <div class="row">
    <div class="col s12">
      <h3 class="card-panel center-align">Panneau de gestion</h3>
    </div>
  </div>
  {{#if Template.subscriptionsReady}}
  <div class="row">
    <div class="container col m9 s12">
      <div class="card-panel">
        <ul class="tabs">
          <li class="tab col m3">
            <a href="#coachingProfile">Mon profil</a>
          </li>
          <li class="tab col m3">
            <a href="#coachingLessons">Mes cours</a>
          </li>
          <li class="tab col m3">
            <a href="#coachingClients">Mes clients</a>
          </li>
          <li class="tab col m3">
            <a href="#coachingCards">Mes cartes</a>
          </li>
        </ul>
        <div id="coachingProfile">
          {{> coachingProfile coachProfile}}
        </div>
        <div id="coachingLessons">
          {{> coachingLessons}}
        </div>
        <div id="coachingClients">
          {{> coachingClients}}
        </div>
        <div id="coachingCards">
          {{> coachingCards}}
        </div>
      </div>
    </div>

    <div class="col m3 hide-on-small-only">
      <div class="card-panel">
        Toutes les séances sur votre Panneau de Gestion
        sont automatiquement référencées sur le site web
        pour que les utilisateurs puissent réserver
        leur place.
      </div>
      <div class="card-panel">
        A chaque fois que vous inscrivez un client
        à l'une de vos séances, le nombre de place
        est automatiquement diminué.
      </div>
      <div class="card-panel">
        Seul les personnes s'étant inscrites par le site
        web peuvent participer au concours mensuel et espérer
        gagner un cadeau.
      </div>
      <div class="card-panel">
        Pour des raisons de sécurité, vos informations
        bancaires ne peuvent être modifiées qu'en contactant
        directement notre équipe.
      </div>
      <div class="card-panel">
        Pour pouvoir aider les individus à pratiquer
        une activité physique régulière, nous devons
        travailler avec toutes les parties prenantes.
        Cela signifie que nous devons travailler avec
        les professionnels qui enseignent leur passion
        au quotidien. Ainsi, l'outil de gestion est
        gratuit dans son utilisation, pour que vous
        n'ayez plus d'excuses pour ne pas nous rejoindre
        dans cette mission.
      </div>
    </div>
  </div>
  {{else}}
  <div class="center-align" style="margin-top:20vh; margin-bottom:20vh;">
    {{> loading}}
  </div>
  {{/if}}
</div>
  <script>
    $(document).ready(function(){
    $('ul.tabs').tabs();
    });
  </script>
</template>

<template name="coachingProfile">
  <br>
  	<div class="row" id="main">
          <div class="col m6 well" id="leftPanel">
              <div class="row">
                  <div class="col m12">
                  	<div>
      				        <img src="{{imgUrl}}" alt="Photo de profil" class="circle" width="156px;">
  				            <h3>{{lastName}} {{firstName}}</h3>
                      <p style="color:#757575;">
                        <i class="material-icons" style="color:#757575;">location_on</i>
                        {{address}}
                      </p>
                      <p>
                        {{email}}
                      </p>
  				            <p>
                        {{description}}
                      </p>
                      <p>

                      </p>
                    </div>
          			  </div>
          		</div>
            </div>
            <div class="col m6 well" id="rightPanel">
              <div class="row">
                <div class="col m12">
      	           <form id="updateCoachProfile">
  			              <h3>Modifier vos informations<small></small></h3>
                  			<div class="row">
                          <div class="input-field col s6">
                            <input id="lastName" type="text" class="validate-required">
                            <label for="lastName">Nom</label>
                          </div>
                          <div class="input-field col s6">
                            <input id="firstName" type="text" class="validate-required">
                            <label for="firstName">Prénom</label>
                          </div>
                  			</div>
                        <div class="row">
                          <div class="input-field col s12">
                            <input id="street" type="text" class="validate-required">
                            <label for="street">Rue</label>
                          </div>
                        </div>

                        <div class="row">
                          <div class="input-field col s6">
                            <input id="zip" type="text" class="validate-required" >
                            <label for="zip">Code Postal</label>
                          </div>
                          <div class="input-field col s6">
                            <input id="city" type="text" class="validate-required" >
                            <label for="city">Commune</label>
                          </div>
                        </div>
                        <div class="row">
                          <div class="input-field col s12">
                            <textarea id="description" length="300" class="materialize-textarea"></textarea>
                            <label for="description">Description (max. 300 lettres)</label>
                          </div>
                        </div>
              			<div class="row">
              				<div class="col xs12 col m6">
                        <button type="submit" form="updateCoachProfile" class="btn red accent-3">
                          Enregistrer</button>
                      </div>
              			</div>
              		</form>
  	</div>
  </div>
</div>
</div>
</template>

<template name="coachingLessons">
  <div class="row">
    <div class="col s12 m10">
      <ul class="tabs">
        <li class="tab col m6">
          <a href="#pastLessons">Passé</a>
        </li>
        <li class="tab col m6">
          <a href="#futureLessons">À venir</a>
        </li>
      </ul>
      <div id="pastLessons">
        {{> pastLessons}}
      </div>
      <div id="futureLessons">
        {{> futureLessons}}
      </div>
    </div>
    <div class="col m2 s12">
      <button class="btn blue darken-2" style="margin-top:30px;">Ajouter</button>
      <button class="btn red accent-2">Signaler</button>
    </div>
  </div>
  <script>
    $(document).ready(function(){
      $('ul.tabs').tabs();
    });
  </script>
</template>

<template name="pastLessons">
  <ul class="collapsible popout" data-collapsible="accordion">
    {{#each lessons}}
    <li>
      <div class="collapsible-header">
        <i class="material-icons" style="font-size:40px;">arrow_drop_down</i>
        <b style="font-size:24px;">{{title}}</b>
        {{dateTime}}
      </div>
      <div class="collapsible-body"><p>{{shortDesc}}</p></div>
    </li>
    {{else}}
      Aucun cours passé.
    {{/each}}
  </ul>
  <script>
    $(document).ready(function(){
      $('.collapsible').collapsible();
    });
  </script>
</template>

<template name="futureLessons">
  <ul class="collapsible popout" data-collapsible="accordion">
    {{#each lessons}}
      <li>
        <div class="collapsible-header">
          <i class="material-icons" style="font-size:40px;">arrow_drop_down</i>
          <b style="font-size:24px;">{{title}}</b>
          {{dateTime}}
        </div>
        <div class="collapsible-body">

          <p>{{shortDesc}}</p>

        </div>
      </li>
    {{else}}
      Aucun cours à venir.
    {{/each}}
  </ul>
  <script>
    $(document).ready(function(){
      $('.collapsible').collapsible();
    });
  </script>
</template>


<template name="coachingClients">
  <br style="margin-top:20px;">
  <p class="flow-text">Vous pouvez gérer vos clients qui n'utilisent pas Trys en
     les enregistrant ici gratuitement.</p>
     <div class="row">
       <div class="col s12 m10">
         <ul class="collapsible" data-collapsible="accordion">
             {{#each clients}}
             <li>
               <div class="collapsible-header"><b>{{lastName}} {{firstName}}</b></div>
               <div class="collapsible-body">
                 <form id="updateClient-{{_id}}" class="updateClientForm">
                   <table class="bordered">
                      <tbody>
                        <tr>
                          <td>Nom : </td>
                          <td>
                            <input id="lastName" name="lastName" type="text" class="validate-required" value="{{lastName}}">
                          </td>
                        </tr>
                        <tr>
                          <td>Prénom : </td>
                          <td>
                            <input id="firstName" name="firstName" type="text" class="validate-required" value="{{firstName}}">
                          </td>
                        </tr>
                        <tr>
                          <td>E-mail : </td>
                          <td>
                            <input id="email" name="email" type="email" class="validate-required" value="{{email}}">
                          </td>
                        </tr>
                        <tr>
                          <td>Téléphone : </td>
                          <td>
                              <input id="tel" name="tel" type="text" class="validate-required" value="{{tel}}">
                          </td>
                        </tr>
                        <tr>
                          <td>Cartes : </td>
                          <td>
                            {{#each card in cards}}
                              {{> clientCard card}}
                            {{/each}}
                            <div class="col s6 m6">

                              <a href="modalAddCardToClient" class="modal-trigger btn-floating btn-large waves-effect waves-light blue darken-2 addCardToClient center-align" style="margin-top:35%;">
                              <i class="material-icons">add</i></a>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </form>
                    <div class="row">
                      <div class="col s6 m3">
                        <button type="submit" form="updateClient-{{_id}}">
                        Modifier le profil</button>
                      </div>
                      <div class="col s6 m3"><button class="btn-flat deleteClient">Supprimer</button></div>
                    </div>
               </div>
             </li>
             {{else}}
             <li>
               <div class="collapsible-header">Aucun client pour le moment.</div>
               <div class="collapsible-body">
                <p>Cliquer sur le bouton "Ajouter" à droite pour pouvoir ajouter
                un client non-membre de Trys. Cela vous permettera d'organiser vos propres étudiants et les
                inscrire à vos séances.
                </p>
                <p><b>Pourquoi les inscrire à vos séances ?</b> Pour 3 raisons principalement. </p>
                <p>
                  La première, c'est que cela nous permet de calculer le nombre
                  de places restantes dans une séance et savoir ainsi jusque quand les
                  utilisateurs de la plateforme peuvent s'inscrire à vos séances.
                </p>
                <p>
                  La seconde raison est que cela vous permet d'avoir un seul endroit
                  où vous pouvez gérez votre activité et avoir une liste de présence unique.
                </p>
                <p>
                  Dernièrement, cela nous permettera dans le futur de vous offrir des
                  statistiques sur votre activité. Vous aurez ainsi un outil puissant d'analyse
                  de votre activité.
                </p>
              </div>
             </li>
             {{/each}}
          </ul>
       </div>
       <div class="col s6 m2">
         <a href="#modalAddClientForm" class="modal-trigger-2 btn blue darken-2">
           Ajouter</a>
       </div>
    </div>

    <div id="modalAddCardToClient" class="modal">
        <div class="modal-content">
          <h3>Ajouter une carte à un client</h3>
          <form id="addCardToClient" >
            <div class="row">
              <div class="input-field col s8">
                <select id="selectCoachCards" name="card">
                  <option value="" disabled selected>Quelle carte ?</option>
                  {{coachCards}}
                </select>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="submit" form="addCardToClient" class="modal-action modal-close">
            Enregistrer</button>
        </div>
    </div>

    <div id="modalAddClientForm" class="modal">
        <div class="modal-content">
          <h3>Ajouter un client</h3>
          <form id="addCoachingClient" >
            <div class="row">
              <div class="input-field col s6">
                <input id="firstName" name="firstName" type="text" class="validate-required">
                <label for="firstName">Prénom</label>
              </div>
              <div class="input-field col s6">
                <input id="lastName" name="lastName" type="text" class="validate-required">
                <label for="lastName">Nom</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s6">
                <input id="email" type="email" name="email" class="validate-required">
                <label for="email">E-mail</label>
              </div>
              <div class="input-field col s6">
                <input id="tel" type="text" name="tel" class="validate">
                <label for="tel">Téléphone</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s8">
                <select id="selectCoachCards" name="card">
                  <option value="" disabled selected>Dispose d'une carte ?</option>
                  <option value="0">Pas de carte</option>
                  {{coachCards}}
                </select>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="submit" form="addCoachingClient" class="modal-action modal-close">
            Enregistrer</button>
        </div>
    </div>
    <script>
      $(document).ready(function(){
        $('.modal-trigger').leanModal();
        $('.modal-trigger-2').leanModal();
        $("#selectCoachCards").on('change', function() {
            $('#selectCoachCards').material_select();
        });
      });
      showCards = function(cards){

      }
    </script>
</template>

<template name="coachingCards">
  <br>
  <div id="modalAddCardForm" class="modal">
      <div class="modal-content">
        <h3>Créer une nouvelle carte</h3>
        <form id="addCoachingCard" >
          <div class="row">
            <div class="input-field col s12">
              <input id="name" type="text" class="validate-required">
              <label for="name">Nom de la carte</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s6">
              <input id="maxAttendings" type="number" minimum="0" class="validate-required">
              <label for="maxAttendings">Nombre de places</label>
            </div>
            <div class="input-field col s6">
              <input id="duration" type="number" class="validate-required">
              <label for="duration">Durée de validité (en mois)</label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s6">
              <input id="price" type="number" minimum="0" class="validate-required">
              <label for="price">Prix de la carte</label>
            </div>
          </div>
        </form>
      </div>
      <button type="submit" form="addCoachingCard" class="modal-action modal-close">
        Enregistrer</button>
  </div>
  <div class="row">
    <div class="row">
      <div class="col m5 s10">
        <a href="#modalAddCardForm" class="modal-trigger btn red blue darken-2">
          Créer une nouvelle carte</a>
      </div>
    </div>

    <div class="row">
      <div class="container col s12">
        {{#each cards}}
          {{> coachingCard}}
        {{else}}
          Aucune carte enregistrée.
        {{/each}}
      </div>
    </div>
  </div>
  <script>
    $(document).ready(function(){
      $('.modal-trigger').leanModal();
    });
  </script>
</template>

<template name="clientCard">
  <div class="col s12 m6">
    <div class="card-panel cyan darken-3 white-text" style="border-radius:10px !important">
      <div class="row"><h4 class="white-text">{{name}}</h4></div>
      <div class="row">
        <div class="col s8">
          <div class="row">
            Places restantes : {{attendingsLeft}}
          </div>
          <div class="row">
            Validité : {{dateTime}}
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="coachingCard">
  <div class="col s6 m4 white-text">
    <div class="card-panel cyan darken-3" style="border-radius:10px !important">
      <div class="row"><h3 class="white-text">{{name}}</h3></div>
      <div class="row">
        <div class="col s8">
          <div class="row">
            pour {{maxAttendings}} places
          </div>
          <div class="row">
            Validité : {{duration}} mois
          </div>
        </div>
        <div class="col s4">
          <b><span style="font-size:35px;">{{price}}</span> €</b>
        </div>
      </div>
    </div>
  </div>
</template>
